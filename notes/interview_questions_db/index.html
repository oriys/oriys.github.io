<!DOCTYPE html>
<html lang="en-us">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 八股文::数据库 | Y.CH.Y</title>
  <link rel = 'canonical' href = '/notes/interview_questions_db/'>
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="八股文::数据库" />
<meta property="og:description" content="数据库 MySQL 为什么使用 B&#43; 树来作索引，对比 B 树它的优点和缺点是什么？ 数据库的事务隔离级别有哪些？各有哪些优缺点？  读未提交  读写都不加锁，不隔离 每次查询到的都是最新版 引发脏读问题   读提交  读此时候已经提交的数据 写数据时，加 X 锁，提交时释放 Oracle 默认隔离级别   可重复读  读取事务开始的数据状态 写数据时，加 X 锁，提交时释放 MySQL 默认隔离级别   串行化  读数据加 S 锁，写数据时加 X 锁，提交时释放 对于同一条数据，同时只有一个事务进行写操作 隔离性最高，性能最差    简述乐观锁以及悲观锁的区别以及使用场景 产生死锁的必要条件有哪些？如何解决死锁？ 聚簇索引和非聚簇索引有什么区别？ 什么是数据库事务，MySQL 为什么会使用 InnoDB 作为默认选项 简述什么是最左匹配原则 MySQL 中 InnoDB 和 MylSAM 的区别是什么？ 数据库如何设计索引，如何优化查询？ 简述数据库中什么情况下进行分库，什么情况下进行分表？ 什么是 SQL 注入攻击？如何防止这类攻击？ 数据库有哪些常见索引？数据库设计的范式是什么？ MySQL 有哪些常见的存储引擎？它们的区别是什么？ 简述一致性哈希算法的实现方式及原理 MySQL 中 join 与 left join 的区别是什么？ 联合索引的存储结构是什么？ 简述 MySQL 常见索引类型，介绍一下覆盖索引 数据库索引的实现原理是什么？ 简述 MySQL 的主从同步机制，如果同步失败会怎么样？ 简述 MySQL MVCC 的实现原理  行记录的版本控制  由于 redo log 的存在，可以从最新版本推算出之前的版本   快照度  不锁定数据的情况下，读取数据的特定历史版本 版本由事物的具体需求确定  RC：根据每次 SELECT 时，其他事务的提交情况 RR：根据事物开始时，其他事物的提交情况     当前读  读取数据的最新版本，并加锁 若当前版本被加锁且不兼容，则阻塞等待 X 锁: UPDATE，DELETE，SELECT FOR UPDATE S 锁: SELECT IN SHARE MODE    简述 MySQL 三种日志的使用场景 数据库的读写分离的作用是什么？如何实现？ 如何解决缓存与数据库不一致的问题？ MySQL 的索引什么情况下会失效？ MySQL 联合索引底层原理是什么？ 唯一索引与普通索引的区别是什么？使用索引会有哪些优缺点？ 简述事务的四大特性  原子性(Atomicity)  事务要么全部成功，要么全部失败 MySQL 的两段式提交保证了事务的原子性 undo log 用来回滚事物的更改   一致性(Consistency)  数据库要从一个一致性状态变换到另一个一致性状态 锁和两段式提交保证了一致性   隔离性(Isolation)  事务不能被其他事务的操作数据干扰 多个并发事务之间要相互隔离 锁和 undo log 实现了 MySQL 事务的隔离性   持久性(Durability)  一个事务一旦被提交，它对数据库的数据的改变就是永久的 redo log 实现了 MySQL 事务的持久化    简述 SQL 中左连接和右连接的区别 如何解决幻读的问题  间隙锁的功能与行锁相同，只是针对间隙加锁 间隙锁不分读写，不允许在间隙内插入 可重复读加锁时候，同时锁住数据和所有间隙  简述间隙锁的作用  加锁时以 Next-Key(间隙加上下一行记录)为基本单位 查找过程中扫描过的范围才加锁 唯一索引等值查询，没有间隙锁，只加行锁 索引等值查询最右一个扫描到的不满足条件值不加行锁 索引才盖上且只加 S 锁时，不锁主键索引  简述更新流程  执行器先找引擎取要更新的记录，如果这一行所在的数据页本来就在内存中，就直接返回给执行器；否则，需要先从磁盘读入内存，给这行加上 X 锁，然后再返回。 执行器拿到引擎给的行数据，把这个值更新，比如原来是 N，现在就是 N&#43;1，得到新的一行数据，再调用引擎接口写入这行新数据。 引擎先将这个更新操作记录到 redo log 里面，再将这行新数据更新到内存中的数据页，此时 redo log 处于 prepare 状态。然后告知执行器执行完成了，随时可以提交事务。 执行器生成这个操作的 binlog，并把 binlog 写入磁盘。 执行器调用引擎的提交事务接口，引擎把刚刚写入的 redo log 改成提交（commit）状态，解 X 锁，更新完成。  B&#43; 树中叶子节点存储的是什么数据 MySQL 索引使用什么数据结构？ SQL 优化的方案有哪些，如何定位问题并解决问题？ 简述主从复制以及读写分离的使用场景 假设建立联合索引 (a, b, c) 如果对字段 a 和 c 查询，会用到这个联合索引吗？ MySQL 有什么调优的方式？ MySQL 常用的聚合函数有哪些？ 简述数据库事务复制原理 简述常见的负载均衡算法 什么时候索引会失效？ 如何解决主从不一致的问题？ 数据库主键索引和唯一索引有什么区别？ 简述 binlog、undo log 和 redo log 的作用  Binlog 归档日志  Binlog 是 server 层产生的逻辑日志 用来进行数据复制和数据传送 Binlog 完整记录了数据库每次的数据操作，可作为数据闪回手段 Binlog 记录在专门的文件中   Undo Log 回滚日志  InnoDB 自身产生的逻辑日志，用于事务回滚和展示旧版本 对任何数据 (缓存) 的更新，都先写 Undo Log Undo Log 位于表空间的 undo segment 中 SQL:update name = &#39;b&#39; -&gt; Undo Log:update name = &#39;a&#39;   Redo Log 重做日志  InnoDB 自身产生的物理日志，记录数据页的变化 InnoDB “日志优先于数据”，记录 Redo Log 视为数据已经更新 内存中的数据更新后写 Redo Log，数据被写入硬盘后删除 Redo Log 储存在 4 个 1GB 文件中，并且循环写入 write pos 当前日志写入点 check point 是擦出点，数据被更新到硬盘时擦除 当 write pos 追上 check pos 点时，事务无法提交，需要等待 check point 推进 Redo Log 保证了数据的持久化    模糊查询是如何实现的？ MySQL 中 varchar 和 char 的区别是什么？ 如何设计数据库压测方案？ 数据库查询中左外连接和内连接的区别是什么？ 并发事务会引发哪些问题？如何解决？ 数据库索引的叶子结点为什么是有序链表？ 如何定位以及优化数据库慢查询 建立了三个单列索引 a, b, c 查询 where a = ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/notes/interview_questions_db/" /><meta property="article:section" content="notes" />
<meta property="article:published_time" content="2021-08-22T21:51:33+08:00" />
<meta property="article:modified_time" content="2021-08-22T21:51:33+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="八股文::数据库"/>
<meta name="twitter:description" content="数据库 MySQL 为什么使用 B&#43; 树来作索引，对比 B 树它的优点和缺点是什么？ 数据库的事务隔离级别有哪些？各有哪些优缺点？  读未提交  读写都不加锁，不隔离 每次查询到的都是最新版 引发脏读问题   读提交  读此时候已经提交的数据 写数据时，加 X 锁，提交时释放 Oracle 默认隔离级别   可重复读  读取事务开始的数据状态 写数据时，加 X 锁，提交时释放 MySQL 默认隔离级别   串行化  读数据加 S 锁，写数据时加 X 锁，提交时释放 对于同一条数据，同时只有一个事务进行写操作 隔离性最高，性能最差    简述乐观锁以及悲观锁的区别以及使用场景 产生死锁的必要条件有哪些？如何解决死锁？ 聚簇索引和非聚簇索引有什么区别？ 什么是数据库事务，MySQL 为什么会使用 InnoDB 作为默认选项 简述什么是最左匹配原则 MySQL 中 InnoDB 和 MylSAM 的区别是什么？ 数据库如何设计索引，如何优化查询？ 简述数据库中什么情况下进行分库，什么情况下进行分表？ 什么是 SQL 注入攻击？如何防止这类攻击？ 数据库有哪些常见索引？数据库设计的范式是什么？ MySQL 有哪些常见的存储引擎？它们的区别是什么？ 简述一致性哈希算法的实现方式及原理 MySQL 中 join 与 left join 的区别是什么？ 联合索引的存储结构是什么？ 简述 MySQL 常见索引类型，介绍一下覆盖索引 数据库索引的实现原理是什么？ 简述 MySQL 的主从同步机制，如果同步失败会怎么样？ 简述 MySQL MVCC 的实现原理  行记录的版本控制  由于 redo log 的存在，可以从最新版本推算出之前的版本   快照度  不锁定数据的情况下，读取数据的特定历史版本 版本由事物的具体需求确定  RC：根据每次 SELECT 时，其他事务的提交情况 RR：根据事物开始时，其他事物的提交情况     当前读  读取数据的最新版本，并加锁 若当前版本被加锁且不兼容，则阻塞等待 X 锁: UPDATE，DELETE，SELECT FOR UPDATE S 锁: SELECT IN SHARE MODE    简述 MySQL 三种日志的使用场景 数据库的读写分离的作用是什么？如何实现？ 如何解决缓存与数据库不一致的问题？ MySQL 的索引什么情况下会失效？ MySQL 联合索引底层原理是什么？ 唯一索引与普通索引的区别是什么？使用索引会有哪些优缺点？ 简述事务的四大特性  原子性(Atomicity)  事务要么全部成功，要么全部失败 MySQL 的两段式提交保证了事务的原子性 undo log 用来回滚事物的更改   一致性(Consistency)  数据库要从一个一致性状态变换到另一个一致性状态 锁和两段式提交保证了一致性   隔离性(Isolation)  事务不能被其他事务的操作数据干扰 多个并发事务之间要相互隔离 锁和 undo log 实现了 MySQL 事务的隔离性   持久性(Durability)  一个事务一旦被提交，它对数据库的数据的改变就是永久的 redo log 实现了 MySQL 事务的持久化    简述 SQL 中左连接和右连接的区别 如何解决幻读的问题  间隙锁的功能与行锁相同，只是针对间隙加锁 间隙锁不分读写，不允许在间隙内插入 可重复读加锁时候，同时锁住数据和所有间隙  简述间隙锁的作用  加锁时以 Next-Key(间隙加上下一行记录)为基本单位 查找过程中扫描过的范围才加锁 唯一索引等值查询，没有间隙锁，只加行锁 索引等值查询最右一个扫描到的不满足条件值不加行锁 索引才盖上且只加 S 锁时，不锁主键索引  简述更新流程  执行器先找引擎取要更新的记录，如果这一行所在的数据页本来就在内存中，就直接返回给执行器；否则，需要先从磁盘读入内存，给这行加上 X 锁，然后再返回。 执行器拿到引擎给的行数据，把这个值更新，比如原来是 N，现在就是 N&#43;1，得到新的一行数据，再调用引擎接口写入这行新数据。 引擎先将这个更新操作记录到 redo log 里面，再将这行新数据更新到内存中的数据页，此时 redo log 处于 prepare 状态。然后告知执行器执行完成了，随时可以提交事务。 执行器生成这个操作的 binlog，并把 binlog 写入磁盘。 执行器调用引擎的提交事务接口，引擎把刚刚写入的 redo log 改成提交（commit）状态，解 X 锁，更新完成。  B&#43; 树中叶子节点存储的是什么数据 MySQL 索引使用什么数据结构？ SQL 优化的方案有哪些，如何定位问题并解决问题？ 简述主从复制以及读写分离的使用场景 假设建立联合索引 (a, b, c) 如果对字段 a 和 c 查询，会用到这个联合索引吗？ MySQL 有什么调优的方式？ MySQL 常用的聚合函数有哪些？ 简述数据库事务复制原理 简述常见的负载均衡算法 什么时候索引会失效？ 如何解决主从不一致的问题？ 数据库主键索引和唯一索引有什么区别？ 简述 binlog、undo log 和 redo log 的作用  Binlog 归档日志  Binlog 是 server 层产生的逻辑日志 用来进行数据复制和数据传送 Binlog 完整记录了数据库每次的数据操作，可作为数据闪回手段 Binlog 记录在专门的文件中   Undo Log 回滚日志  InnoDB 自身产生的逻辑日志，用于事务回滚和展示旧版本 对任何数据 (缓存) 的更新，都先写 Undo Log Undo Log 位于表空间的 undo segment 中 SQL:update name = &#39;b&#39; -&gt; Undo Log:update name = &#39;a&#39;   Redo Log 重做日志  InnoDB 自身产生的物理日志，记录数据页的变化 InnoDB “日志优先于数据”，记录 Redo Log 视为数据已经更新 内存中的数据更新后写 Redo Log，数据被写入硬盘后删除 Redo Log 储存在 4 个 1GB 文件中，并且循环写入 write pos 当前日志写入点 check point 是擦出点，数据被更新到硬盘时擦除 当 write pos 追上 check pos 点时，事务无法提交，需要等待 check point 推进 Redo Log 保证了数据的持久化    模糊查询是如何实现的？ MySQL 中 varchar 和 char 的区别是什么？ 如何设计数据库压测方案？ 数据库查询中左外连接和内连接的区别是什么？ 并发事务会引发哪些问题？如何解决？ 数据库索引的叶子结点为什么是有序链表？ 如何定位以及优化数据库慢查询 建立了三个单列索引 a, b, c 查询 where a = ?"/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/styles.ace637160e3ee466ac48adf2107be5e9e0b7f168aff4b05023ac0c573f8200b3f1ced7d604b86d1b519cf620f8b1bc3c13abec114d6d055da6327e8e79ac3dfb.css" integrity="sha512-rOY3Fg4&#43;5GasSK3yEHvl6eC38Wiv9LBQI6wMVz&#43;CALPxztfWBLhtG1Gc9iD4sbw8E6vsEU1tBV2mMn6Oeaw9&#43;w=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="/images/favicon.ico" />

  
  
  
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-X1L70M4MM0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

    <header id="header">
  <a href="/">
  
    <div id="logo" style="background-image: url(/images/logo.png)"></div>
  
  <div id="title">
    <h1>Y.CH.Y</h1>
  </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#" aria-label="Menu"><i class="fas fa-bars fa-2x" aria-hidden="true"></i></a>
      </li>
      
        <li><a href="/">首页</a></li>
      
        <li><a href="/algorithm">算法</a></li>
      
        <li><a href="/about">关于</a></li>
      
    </ul>
  </div>
</header>



    
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <div class="content" itemprop="articleBody">
  
    <h2 id="数据库">数据库</h2>
<h3 id="mysql-为什么使用-b-树来作索引对比-b-树它的优点和缺点是什么">MySQL 为什么使用 B+ 树来作索引，对比 B 树它的优点和缺点是什么？</h3>
<h3 id="数据库的事务隔离级别有哪些各有哪些优缺点">数据库的事务隔离级别有哪些？各有哪些优缺点？</h3>
<ul>
<li>读未提交
<ul>
<li>读写都不加锁，不隔离</li>
<li>每次查询到的都是最新版</li>
<li>引发脏读问题</li>
</ul>
</li>
<li>读提交
<ul>
<li>读此时候已经提交的数据</li>
<li>写数据时，加 X 锁，提交时释放</li>
<li>Oracle 默认隔离级别</li>
</ul>
</li>
<li>可重复读
<ul>
<li>读取事务开始的数据状态</li>
<li>写数据时，加 X 锁，提交时释放</li>
<li>MySQL 默认隔离级别</li>
</ul>
</li>
<li>串行化
<ul>
<li>读数据加 S 锁，写数据时加 X 锁，提交时释放</li>
<li>对于同一条数据，同时只有一个事务进行写操作</li>
<li>隔离性最高，性能最差</li>
</ul>
</li>
</ul>
<h3 id="简述乐观锁以及悲观锁的区别以及使用场景">简述乐观锁以及悲观锁的区别以及使用场景</h3>
<h3 id="产生死锁的必要条件有哪些如何解决死锁">产生死锁的必要条件有哪些？如何解决死锁？</h3>
<h3 id="聚簇索引和非聚簇索引有什么区别">聚簇索引和非聚簇索引有什么区别？</h3>
<h3 id="什么是数据库事务mysql-为什么会使用-innodb-作为默认选项">什么是数据库事务，MySQL 为什么会使用 InnoDB 作为默认选项</h3>
<h3 id="简述什么是最左匹配原则">简述什么是最左匹配原则</h3>
<h3 id="mysql-中-innodb-和-mylsam-的区别是什么">MySQL 中 InnoDB 和 MylSAM 的区别是什么？</h3>
<h3 id="数据库如何设计索引如何优化查询">数据库如何设计索引，如何优化查询？</h3>
<h3 id="简述数据库中什么情况下进行分库什么情况下进行分表">简述数据库中什么情况下进行分库，什么情况下进行分表？</h3>
<h3 id="什么是-sql-注入攻击如何防止这类攻击">什么是 SQL 注入攻击？如何防止这类攻击？</h3>
<h3 id="数据库有哪些常见索引数据库设计的范式是什么">数据库有哪些常见索引？数据库设计的范式是什么？</h3>
<h3 id="mysql-有哪些常见的存储引擎它们的区别是什么">MySQL 有哪些常见的存储引擎？它们的区别是什么？</h3>
<h3 id="简述一致性哈希算法的实现方式及原理">简述一致性哈希算法的实现方式及原理</h3>
<h3 id="mysql-中-join-与-left-join-的区别是什么">MySQL 中 join 与 left join 的区别是什么？</h3>
<h3 id="联合索引的存储结构是什么">联合索引的存储结构是什么？</h3>
<h3 id="简述-mysql-常见索引类型介绍一下覆盖索引">简述 MySQL 常见索引类型，介绍一下覆盖索引</h3>
<h3 id="数据库索引的实现原理是什么">数据库索引的实现原理是什么？</h3>
<h3 id="简述-mysql-的主从同步机制如果同步失败会怎么样">简述 MySQL 的主从同步机制，如果同步失败会怎么样？</h3>
<h3 id="简述-mysql-mvcc-的实现原理">简述 MySQL MVCC 的实现原理</h3>
<ul>
<li>行记录的版本控制
<ul>
<li>由于 redo log 的存在，可以从最新版本推算出之前的版本</li>
</ul>
</li>
<li>快照度
<ul>
<li>不锁定数据的情况下，读取数据的特定历史版本</li>
<li>版本由事物的具体需求确定
<ul>
<li>RC：根据每次 SELECT 时，其他事务的提交情况</li>
<li>RR：根据事物开始时，其他事物的提交情况</li>
</ul>
</li>
</ul>
</li>
<li>当前读
<ul>
<li>读取数据的最新版本，并加锁</li>
<li>若当前版本被加锁且不兼容，则阻塞等待</li>
<li>X 锁: UPDATE，DELETE，SELECT FOR UPDATE</li>
<li>S 锁: SELECT IN SHARE MODE</li>
</ul>
</li>
</ul>
<h3 id="简述-mysql-三种日志的使用场景">简述 MySQL 三种日志的使用场景</h3>
<h3 id="数据库的读写分离的作用是什么如何实现">数据库的读写分离的作用是什么？如何实现？</h3>
<h3 id="如何解决缓存与数据库不一致的问题">如何解决缓存与数据库不一致的问题？</h3>
<h3 id="mysql-的索引什么情况下会失效">MySQL 的索引什么情况下会失效？</h3>
<h3 id="mysql-联合索引底层原理是什么">MySQL 联合索引底层原理是什么？</h3>
<h3 id="唯一索引与普通索引的区别是什么使用索引会有哪些优缺点">唯一索引与普通索引的区别是什么？使用索引会有哪些优缺点？</h3>
<h3 id="简述事务的四大特性">简述事务的四大特性</h3>
<ul>
<li>原子性(Atomicity)
<ul>
<li>事务要么全部成功，要么全部失败</li>
<li>MySQL 的两段式提交保证了事务的原子性</li>
<li>undo log 用来回滚事物的更改</li>
</ul>
</li>
<li>一致性(Consistency)
<ul>
<li>数据库要从一个一致性状态变换到另一个一致性状态</li>
<li>锁和两段式提交保证了一致性</li>
</ul>
</li>
<li>隔离性(Isolation)
<ul>
<li>事务不能被其他事务的操作数据干扰</li>
<li>多个并发事务之间要相互隔离</li>
<li>锁和 undo log 实现了 MySQL 事务的隔离性</li>
</ul>
</li>
<li>持久性(Durability)
<ul>
<li>一个事务一旦被提交，它对数据库的数据的改变就是永久的</li>
<li>redo log 实现了 MySQL 事务的持久化</li>
</ul>
</li>
</ul>
<h3 id="简述-sql-中左连接和右连接的区别">简述 SQL 中左连接和右连接的区别</h3>
<h3 id="如何解决幻读的问题">如何解决幻读的问题</h3>
<ul>
<li>间隙锁的功能与行锁相同，只是针对间隙加锁</li>
<li>间隙锁不分读写，不允许在间隙内插入</li>
<li>可重复读加锁时候，同时锁住数据和所有间隙</li>
</ul>
<h3 id="简述间隙锁的作用">简述间隙锁的作用</h3>
<ul>
<li>加锁时以 Next-Key(间隙加上下一行记录)为基本单位</li>
<li>查找过程中扫描过的范围才加锁</li>
<li>唯一索引等值查询，没有间隙锁，只加行锁</li>
<li>索引等值查询最右一个扫描到的不满足条件值不加行锁</li>
<li>索引才盖上且只加 S 锁时，不锁主键索引</li>
</ul>
<h3 id="简述更新流程">简述更新流程</h3>
<ul>
<li>执行器先找引擎取要更新的记录，如果这一行所在的数据页本来就在内存中，就直接返回给执行器；否则，需要先从磁盘读入内存，给这行加上 X 锁，然后再返回。</li>
<li>执行器拿到引擎给的行数据，把这个值更新，比如原来是 N，现在就是 N+1，得到新的一行数据，再调用引擎接口写入这行新数据。</li>
<li>引擎先将这个更新操作记录到 redo log 里面，再将这行新数据更新到内存中的数据页，此时 redo log 处于 prepare 状态。然后告知执行器执行完成了，随时可以提交事务。</li>
<li>执行器生成这个操作的 binlog，并把 binlog 写入磁盘。</li>
<li>执行器调用引擎的提交事务接口，引擎把刚刚写入的 redo log 改成提交（commit）状态，解 X 锁，更新完成。</li>
</ul>
<h3 id="b-树中叶子节点存储的是什么数据">B+ 树中叶子节点存储的是什么数据</h3>
<h3 id="mysql-索引使用什么数据结构">MySQL 索引使用什么数据结构？</h3>
<h3 id="sql-优化的方案有哪些如何定位问题并解决问题">SQL 优化的方案有哪些，如何定位问题并解决问题？</h3>
<h3 id="简述主从复制以及读写分离的使用场景">简述主从复制以及读写分离的使用场景</h3>
<h3 id="假设建立联合索引-a-b-c-如果对字段-a-和-c-查询会用到这个联合索引吗">假设建立联合索引 (a, b, c) 如果对字段 a 和 c 查询，会用到这个联合索引吗？</h3>
<h3 id="mysql-有什么调优的方式">MySQL 有什么调优的方式？</h3>
<h3 id="mysql-常用的聚合函数有哪些">MySQL 常用的聚合函数有哪些？</h3>
<h3 id="简述数据库事务复制原理">简述数据库事务复制原理</h3>
<h3 id="简述常见的负载均衡算法">简述常见的负载均衡算法</h3>
<h3 id="什么时候索引会失效">什么时候索引会失效？</h3>
<h3 id="如何解决主从不一致的问题">如何解决主从不一致的问题？</h3>
<h3 id="数据库主键索引和唯一索引有什么区别">数据库主键索引和唯一索引有什么区别？</h3>
<h3 id="简述-binlogundo-log-和-redo-log-的作用">简述 binlog、undo log 和 redo log 的作用</h3>
<ul>
<li>Binlog 归档日志
<ul>
<li>Binlog 是 server 层产生的逻辑日志</li>
<li>用来进行数据复制和数据传送</li>
<li>Binlog 完整记录了数据库每次的数据操作，可作为数据闪回手段</li>
<li>Binlog 记录在专门的文件中</li>
</ul>
</li>
<li>Undo Log 回滚日志
<ul>
<li>InnoDB 自身产生的逻辑日志，用于事务回滚和展示旧版本</li>
<li>对任何数据 (缓存) 的更新，都先写 Undo Log</li>
<li>Undo Log 位于表空间的 undo segment 中</li>
<li>SQL:<code>update name = 'b'</code> -&gt; Undo Log:<code>update name = 'a'</code></li>
</ul>
</li>
<li>Redo Log 重做日志
<ul>
<li>InnoDB 自身产生的物理日志，记录数据页的变化</li>
<li>InnoDB “日志优先于数据”，记录 Redo Log 视为数据已经更新</li>
<li>内存中的数据更新后写 Redo Log，数据被写入硬盘后删除</li>
<li>Redo Log 储存在 4 个 1GB 文件中，并且循环写入</li>
<li>write pos 当前日志写入点</li>
<li>check point 是擦出点，数据被更新到硬盘时擦除</li>
<li>当 write pos 追上 check pos 点时，事务无法提交，需要等待 check point 推进</li>
<li>Redo Log 保证了数据的持久化</li>
</ul>
</li>
</ul>
<h3 id="模糊查询是如何实现的">模糊查询是如何实现的？</h3>
<h3 id="mysql-中-varchar-和-char-的区别是什么">MySQL 中 varchar 和 char 的区别是什么？</h3>
<h3 id="如何设计数据库压测方案">如何设计数据库压测方案？</h3>
<h3 id="数据库查询中左外连接和内连接的区别是什么">数据库查询中左外连接和内连接的区别是什么？</h3>
<h3 id="并发事务会引发哪些问题如何解决">并发事务会引发哪些问题？如何解决？</h3>
<h3 id="数据库索引的叶子结点为什么是有序链表">数据库索引的叶子结点为什么是有序链表？</h3>
<h3 id="如何定位以及优化数据库慢查询">如何定位以及优化数据库慢查询</h3>
<h3 id="建立了三个单列索引-a-b-c-查询-where-a---b---c--索引会起作用吗">建立了三个单列索引 a, b, c 查询 where a = ? b = ? c = ？索引会起作用吗？</h3>
<h3 id="数据库反范式设计会出现什么问题">数据库反范式设计会出现什么问题？</h3>
<h3 id="mysql-锁的种类">MySQL 锁的种类</h3>
<p>按照粒度分，MySQL 锁可以分为全局锁、表级锁、行锁</p>
<ul>
<li>全局锁
<ul>
<li>FTWRL(Flush tables with read lock)</li>
<li>使整个库处于只读状态</li>
<li>主要用途保证备份的一致性</li>
</ul>
</li>
<li>表锁
<ul>
<li>lock tables table_name read/write</li>
<li>锁住整张表</li>
<li>元数据锁 (matadata lock)
<ul>
<li>表的结构、字段，数据类型、索引</li>
<li>事务访问元数据时，会自动给表加 DML 读锁</li>
<li>事物修改元数据时，会自动给表加 MDL 写锁</li>
</ul>
</li>
</ul>
</li>
<li>行锁
<ul>
<li>读锁/写锁</li>
<li>只有写写兼容</li>
</ul>
</li>
</ul>
<p>全局锁会锁住左右表，整个库无法修改</p>
<p>表级锁分为表锁 (数据锁) 和元数据锁</p>
<p>行锁会锁住数据行，分为共享锁和独占锁</p>
<h3 id="什么是脏读不可重复读幻读">什么是脏读、不可重复读、幻读</h3>
<ul>
<li>脏读: 读到了其他事务未提交的数据</li>
<li>不可重复读: 同样的查询读到的数据内容不一样</li>
<li>幻读: 同样的查询读到了更多的数据</li>
</ul>
<p>MySQL 不同隔离级别的问题</p>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th style="text-align:center">脏读</th>
<th style="text-align:center">不可重复读</th>
<th style="text-align:center">幻读</th>
</tr>
</thead>
<tbody>
<tr>
<td>RU</td>
<td style="text-align:center">X</td>
<td style="text-align:center">X</td>
<td style="text-align:center">X</td>
</tr>
<tr>
<td>RC</td>
<td style="text-align:center">√</td>
<td style="text-align:center">X</td>
<td style="text-align:center">X</td>
</tr>
<tr>
<td>RR</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">部分 √</td>
</tr>
<tr>
<td>SR</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
</tbody>
</table>
<h3 id="长事务危害">长事务危害</h3>
<ul>
<li>行级锁长时间无法释放，导致其他事务等待
<ul>
<li>当前读会对数据行加锁，事务提交前无法释放</li>
<li>调整 innodb_lock_wait_timeout 参数，默认 50 秒，超过 50 秒还未获取锁报错，适当缩短参数</li>
</ul>
</li>
<li>容易产生死锁
<ul>
<li>两个事务都等待对方的锁释放</li>
<li>主动死锁检测: innodb_deadlock_detect，发现死锁回滚代价比较小的事务</li>
</ul>
</li>
<li>MDL 锁 hold 住大量事务，造成 MySQL 奔溃
<ul>
<li>事务访问数据时，会自动给表加 MDL 锁</li>
<li>事务修改元数据时，自动加 MDL 锁</li>
<li>遇到锁不兼容时，申请 MDL 锁的事务形成一个队列</li>
</ul>
</li>
<li>查看影响性能的锁
<ul>
<li>查看长事务 infomation_schema 库 innodb_trx 表</li>
<li>查看锁 infomation_schema 库 innodb_locks 表</li>
<li>查看阻塞的事务 infomation_schema 库 innodb_locks_waits 表</li>
<li>查看锁 performance_schema 库 data_locks 表</li>
<li>查看锁等待 performance_schema 库 data_locks_waits 表</li>
<li>查看 MDL 锁 performance_schema 库 matadata_locko 表</li>
</ul>
</li>
<li>业务上的建议
<ul>
<li>控制长事务，没有必要的情况不开始事务</li>
<li>数据修改尽量放在事务后部分，降低锁时间</li>
</ul>
</li>
</ul>
<h3 id="数据库备份">数据库备份</h3>
<ul>
<li>备份时数据库的状态
<ul>
<li>热备：正常运行中直接备份</li>
<li>冷备：完全停止后备份</li>
<li>温备：数据库只读</li>
</ul>
</li>
<li>备份文件的格式
<ul>
<li>逻辑备份：导出文本或 SQL 语句</li>
<li>物理备份：备份数据库底层文件</li>
</ul>
</li>
<li>备份文件的内容
<ul>
<li>完全备份：备份完整数据</li>
<li>增量备份：备份数据差异</li>
<li>日志备份：备份 Binlog</li>
</ul>
</li>
<li>工具
<ul>
<li>mysqldump：逻辑，热备，全量或部分</li>
<li>xtrabackup：物理，热，全量+增量备份</li>
</ul>
</li>
</ul>

  
  </div>
</article>


    <footer id="footer">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
  <div class="footer-left">
    Copyright  &copy; 2021  Y.CH.Y 
    
    
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">首页</a></li>
         
        <li><a href="/algorithm">算法</a></li>
         
        <li><a href="/about">关于</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
</html>
